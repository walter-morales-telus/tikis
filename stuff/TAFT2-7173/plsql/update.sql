DECLARE
    cnt NUMBER := 0;
    TYPE nt_type IS TABLE of NUMBER;
    nt nt_type := nt_type 
    (
        9154692001813568857,
        9159885453213733052,
        9154692001813568861,
        9154271501413485945,
        9154271411213485840,
        9153717760713369342,
        9158570515613839221,
        9155668375713436844,
        9160608660513838410,
        9161139867813174707,
        9160096156713881280,
        9158784856213258676,
        9160576096213818376,
        9153221850313522919,
        9159910274213214923,
        9153717830013369362,
        9160915021013080103,
        9158682591413006796,
        9153717895913369477,
        9153717935713369487,
        9158570406513692700,
        9152886306413833754,
        9159088186813776230,
        9159426735413975562,
        9154021114713794802,
        9153718214513369602,
        9153717686213369317,
        9150944325613969648,
        9151007940913864317,
        9153641371513264002,
        9153252667113855646,
        9150999641313446572,
        9156028902213547599,
        9152413576613344830,
        9152765550513743262,
        9156028901513547589,
        9152696235913698130,
        9152824285013257747,
        9154692129913569010,
        9151859844713889100,
        9151948057313944504,
        9153282487213562279,
        9151859844713889084,
        9154692129913569018,
        9151859834013889079,
        9152823970713257642,
        9152413576613344822,
        9156028902313547604,
        9152413576613344806,
        9159885441513733017,
        9151859844713889092,
        9153282637613563298,
        9152638229913892680,
        9152638230013892684,
        9151948057313944508,
        9156028902013547594,
        9151948057313944496,
        9151948057313944500,
        9159789451813673610,
        9158570466313772100,
        9159439016913219855,
        9156315199913827746,
        9160808159913003534,
        9152679133013684487,
        9161139826913174701,
        9160914584513079878,
        9151948057313944480,
        9153282671913563308,
        9159885451713733047,
        9159885447013733032,
        9159885443613733022,
        9152413576313344802,
        9154692001813568865,
        9153282665213563303,
        9154692001813568869,
        9151948057313944488,
        9152413576613344826,
        9151948057313944512,
        9159885439313733012,
        9159885454813733057,
        9151859844713889104,
        9151948057313944476,
        9152413576613344814,
        9159885445413733027,
        9151859844713889088,
        9151948057313944492,
        9159969587213156578,
        9151948057313944484,
        9159969590013156583,
        9159885450013733042,
        9151859844713889096,
        9152413576613344810,
        9152895951313298878,
        9154692129913569014,
        9154692129913569022,
        9153243237213849539,
        9151948057313944472,
        9152413576613344818,
        9153484100313298911,
        9151773708513683839,
        9151961374613150061,
        9153252685813855653,
        9158399012813410416,
        9158399038213410421,
        9158399058813410426,
        9153717844813369367,
        9153717904613369482,
        9151961361413150056,
        9153717945113369492,
        9153717697413369322,
        9153717792413369352,
        9156453502813215332,
        9152091511313667713,
        9153717649613369312,
        9155668374113436839,
        9156367733613137624,
        9150139523313950374,
        9154692129913569006,
        9156491914013119982,
        9159885448613733037
    );
BEGIN
    SAVEPOINT before_dormant;
    FOR i IN 1..nt.count LOOP                                       /*Tax Code attr*/
        SELECT COUNT(*) INTO cnt FROM nc_references WHERE attr_id = 9142883780313111933 and object_id = (SELECT object_id  FROM nc_objects nco WHERE parent_id = nt(i));
        IF cnt = 1 THEN
            BEGIN                                  /*Tax Code attr*/                /*9999 ref*/
                UPDATE nc_references SET attr_id = 9142883780313111933 , reference = 9153786500813327277 
                WHERE attr_id = 9142883780313111933 AND object_id = (SELECT object_id  FROM nc_objects nco WHERE parent_id = 9154271501413485945);
                DBMS_OUTPUT.PUT_LINE('Promotion: '|| nt(i) ||'; TaxCode Successfully updated to 9999' );
            EXCEPTION
            WHEN OTHERS THEN
                ROLLBACK TO before_dormant;
                DBMS_OUTPUT.PUT_LINE('EXCEPTION WITH OBJECT_ID: ' || nt(i));
            END;
        ELSE
            DBMS_OUTPUT.PUT_LINE('Promotion: '|| nt(i) ||'; Alteration Price already has: ' || cnt || ' TaxCode References; NO update was performed');
        END IF;
    END LOOP;
END;
/


























